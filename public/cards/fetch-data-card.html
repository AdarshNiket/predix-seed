<link rel="import" href="../bower_components/polymer/polymer.html"/>
<link rel="import" href="../bower_components/px-card/px-card.html"/>
<link rel="import" href="../bower_components/px-card/px-card-controls.html"/>
<link rel="import" href="../bower_components/px-card/px-card-behavior.html"/>

<dom-module id="fetch-data-card">
    <template>
        <px-card>
            <div style="border:black 2px solid;">
                <h1>Fetch data</h1>
                <button on-click="getMoreTemperatureData">Get Different Data</button>
                <p id="temp">Current Temperature:<span>{{currentTemperature}}</span>F</p>
            </div>
        </px-card>
    </template>
</dom-module>
<script>

    Polymer({
        is: 'fetch-data-card',
        init: function() {
            this.getTemperature('http://3.39.77.244:3000/gauge');
        },
        getMoreTemperatureData: function() {
            this.getTemperature('http://3.39.77.244:3000/bar');
        },
        getTemperature: function(url){
            var self = this;
            this.getData(url).then(function(data) {
                // on fulfillment
                self.currentTemperature = data.value;
            }, function(reason) {
                // on rejection
                console.error('ERROR', reason);
            });
        },
        behaviors: [px.cardBehavior]
    });
</script>


