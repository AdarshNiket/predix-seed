<link rel="import" href="../bower_components/polymer/polymer.html"/>
<link rel="import" href="../bower_components/px-card/px-card.html"/>
<link rel="import" href="../bower_components/px-card/px-card-behavior.html"/>

<dom-module id="px-widget">
    <template>
        <div>Dummy Timeseries</div>
        <div>Min: <span>{{chartState.min}}</span></div>
        <div>Max: <span>{{chartState.max}}</span></div>
        <button on-click="zoom">Zoom</button>
    </template>

</dom-module>
<script>
    Polymer({
        is: 'px-widget',
        properties: {
            chartState: {
                type: Object,
                notify: true
            },
            gauge: {
                type: Object
            }
        },
        zoom: function() {
            this.chartState.min++;
            this.chartState.max--;
            this.updateMyState();
        },
        ready: function() {
            this.chartState = {
                min: 0,
                max: 100
            }
        },
        updateMyState: function() {
            this.set('chartState', {
                min: this.chartState.min,
                max: this.chartState.max
            });
        }
    });
</script>

<dom-module id="sample-card">
    <template>
        <px-card>
            <div>Context Name <span>{{context.name}}</span></div>
            <px-widget chart-state="{{chartState}}"></px-widget>
        </px-card>
    </template>
</dom-module>
<script>

    Polymer({
        is: 'sample-card',
        observers: ['chartStateChanged(chartState.*)'],
        deckStateChanged: function(newState, oldState) {

            this.chartState = {
                min: newState.zoom.min,
                max: newState.zoom.max
            };

        },
        contextChanged: function(newContext){
            console.log('newContext', newContext);
        },
        chartStateChanged: function(newChartState) {
            this.updateDeck({
                zoom: {min: newChartState.base.min, max: newChartState.base.max}
            });
        },
        behaviors: [px.cardBehavior]
    });
</script>
